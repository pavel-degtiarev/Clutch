async function enablePreload(){self.registration.navigationPreload&&await self.registration.navigationPreload.enable()}async function putInCache(e,t){if("chrome-extension:"!==new URL(e.url).protocol){const n=await caches.open("v1");await n.put(e,t)}}async function fetchResource(e){var t=await caches.match(e.request);if(t)return t;const n=await e.preloadResponse;if(n)return console.info("using preload response",n),putInCache(e.request,n.clone()),n;try{const a=await fetch(e.request);return putInCache(e.request,a.clone()),a}catch(e){return new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}}self.addEventListener("activate",e=>e.waitUntil(enablePreload())),self.addEventListener("fetch",e=>e.respondWith(fetchResource(e)));
